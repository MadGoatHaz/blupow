# BluPow: Renogy Bluetooth Integration for Home Assistant

![BluPow Project Logo](brand/blupow/logo.png)

Connect your Renogy Bluetooth-enabled devices to Home Assistant with this powerful and reliable integration. BluPow allows you to monitor your solar charge controller, inverter, or smart battery directly from your Home Assistant dashboard.

This integration has been significantly updated to provide robust error handling, improved device compatibility (especially for ESP32-based devices), and detailed logging for easier troubleshooting.

## Features

-   **Local Push:** Data is updated in real-time without relying on the cloud.
-   **Device Support:** Designed for Renogy devices equipped with a Bluetooth module (e.g., BT-1, BT-2) or built-in Bluetooth. Now with improved support for a wider range of devices, including those based on ESP32.
-   **Auto-discovery:** (Planned for future release)
-   **Rich Sensor Data:** Provides a wide range of sensors for comprehensive monitoring.
-   **Enhanced Reliability:** Includes advanced connection retry logic and error handling to ensure a stable connection.

## Supported Sensors

Depending on your device, the following sensors may be available:

-   **Model Number:** The model identifier of your Renogy device.
-   **Battery State of Charge (SOC):** The remaining battery capacity as a percentage.
-   **Battery Voltage:** The current voltage of your battery bank.
-   **Battery Current:** The current flowing into or out of the battery.
-   **Battery Temperature:** The temperature of the battery sensor.
-   **Solar Voltage:** The voltage coming from your solar panels.
-   **Solar Current:** The current being generated by your solar panels.
-   **Solar Power:** The power being generated by your solar panels in Watts.

## Installation

1.  **HACS (Recommended):**
    -   Go to HACS > Integrations.
    -   Click the three dots in the top right and select "Custom repositories".
    -   Add the URL to this repository (`https://github.com/MadGoatHaz/blupow`) and select "Integration" as the category.
    -   Click "Add".
    -   The `BluPow` integration will now be available to install.
    -   Restart Home Assistant.

2.  **Manual Installation:**
    -   Copy the `custom_components/blupow` directory into your Home Assistant `custom_components` folder.
    -   Restart Home Assistant.

## Configuration

1.  Go to **Settings > Devices & Services**.
2.  Click **Add Integration** and search for **BluPow**.
3.  The integration will automatically scan for nearby Renogy devices. If your device is not discovered, you can add it manually by providing its Bluetooth MAC address.

## Troubleshooting

-   **Device not found:** Ensure your device is powered on and within Bluetooth range of your Home Assistant server. Check that the Bluetooth adapter on your Home Assistant machine is enabled and working correctly. If you continue to have issues, enable debug logging for this integration to get more insight.
-   **Connection errors:** Other applications or integrations can sometimes interfere with Bluetooth connections. This integration is designed to be resilient, but you can try disabling other Bluetooth integrations temporarily to see if it resolves the issue. The latest version includes specific workarounds for common ESP32 connection problems.
-   **Enable Debug Logging:** To get detailed logs for troubleshooting, add the following to your `configuration.yaml`:
    ```yaml
    logger:
      logs:
        custom_components.blupow: debug
    ```

## Contributing

Contributions are welcome! If you have suggestions for improvements or find a bug, please open an issue or submit a pull request.
